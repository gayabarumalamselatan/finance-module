(self.webpackChunkgrit_finance_module=self.webpackChunkgrit_finance_module||[]).push([[444],{5444:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var l=a(2769),n=a.n(l),r=a(8029),c=a(7450),o=a(1083),s=a(6974),u=a(3063),m=a(4503),i=a(8252),E=a(2434),d=a(937);const p=e=>{let{formCode:t,dataTable:a,handleSelect:r,pageSize:c,handlePageSizeChange:o,handleRefresh:s,totalItems:u,currentPage:m,handlePageChange:p,isLoadingTable:h,handleFilterSearch:g,handleResetFilter:f,addingNewPurchaseRequest:A}=e;const[v,b]=(0,l.useState)([]),[y,C]=(0,l.useState)(!1),[N,S]=(0,l.useState)(""),[R,k]=(0,l.useState)(""),[D,P]=(0,l.useState)(""),[T,I]=(0,l.useState)(!1),[_,w]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{b([])}),[a]),n().createElement("div",null,n().createElement("div",{className:"card card-default"},n().createElement("div",{className:"card-header"},n().createElement("div",{className:"row align-items-center"},n().createElement("div",{className:"col-md-4"},n().createElement("div",{className:"col-md-12 d-flex align-items-center"},n().createElement("div",{className:"row-per-page-label",style:{whiteSpace:"nowrap"}},"Rows per page:"),n().createElement("select",{style:{margin:"5px"},id:"pageSizeSelect",value:c,onChange:o,className:"form-form-select form-select-sm"},n().createElement("option",{value:"5"},"5"),n().createElement("option",{value:"10"},"10"),n().createElement("option",{value:"30"},"30"),n().createElement("option",{value:"50"},"50"),n().createElement("option",{value:"100"},"100")))),n().createElement("div",{className:"col-md-8 d-flex justify-content-end align-items-center"},n().createElement("div",{className:"btn-group ml-2"},n().createElement("button",{type:"button",className:"btn btn-default",onClick:s},n().createElement(d.KP4,null)),n().createElement("button",{type:"button",className:"btn btn-default",onClick:()=>{A(!0)}},n().createElement(d.toK,null)," Add New"),v.length>0&&n().createElement(n().Fragment,null,n().createElement("button",{type:"button",className:"btn btn-default",onClick:()=>{console.log("Edit selected rows:",v)}},n().createElement(d.uO9,null)," Edit"),n().createElement("button",{type:"button",className:"btn btn-default",onClick:()=>{console.log("Delete selected rows:",v)}},n().createElement(d.qbC,null)," Delete"),n().createElement("button",{type:"button",className:"btn btn-default",onClick:()=>{console.log("Export selected rows:",v)}},n().createElement(d.Mbn,null)," Export")),n().createElement("button",{type:"button",className:"btn "+(y?"btn-secondary":"btn-default"),onClick:()=>{C(!y)}},y?n().createElement(n().Fragment,null,n().createElement("span",{className:"ml-1"},n().createElement("i",{className:"fa fa-times"}),"Close")):n().createElement(n().Fragment,null,n().createElement(d.YsJ,null)," ",n().createElement("span",{className:"ml-1"},"Filter"))))))),y&&n().createElement("div",{className:"card-body"},n().createElement("form",{className:"row"},n().createElement("div",{className:"col-md-4 mb-3"},n().createElement("select",{className:"form-control",value:N,onChange:e=>S(e.target.value)},n().createElement("option",{value:""},"Select a column"),n().createElement("option",{value:"PR_NUMBER"},"PR Number"),n().createElement("option",{value:"TITLE"},"Title"),n().createElement("option",{value:"REQUEST_DATE"},"Request Date"),n().createElement("option",{value:"SCHEDULE_DATE"},"Schedule Date"),n().createElement("option",{value:"DOC_NO"},"Document Number"),n().createElement("option",{value:"REQUESTOR"},"Requestor"),n().createElement("option",{value:"DEPARTEMENT"},"Department"),n().createElement("option",{value:"COMPANY"},"Company"),n().createElement("option",{value:"PROJECT"},"Project"),n().createElement("option",{value:"TOTAL_AMOUNT"},"Total Amount"),n().createElement("option",{value:"DESCRIPTION"},"Description"),n().createElement("option",{value:"CREATED_BY"},"Created By"),n().createElement("option",{value:"CHECKED_BY_1"},"Checked By 1"),n().createElement("option",{value:"CHECKED_BY_2"},"Checked By 2"),n().createElement("option",{value:"APPROVED_BY"},"Approved By"),n().createElement("option",{value:"STATUS_REQUEST"},"Status Request"))),n().createElement("div",{className:"col-md-4 mb-3"},n().createElement("select",{className:"form-control",value:D,onChange:e=>P(e.target.value)},n().createElement("option",{value:""},"Select filter"),n().createElement("option",{value:"EQUAL"},"Equal"),n().createElement("option",{value:"NOTEQUAL"},"Not Equal"),n().createElement("option",{value:"LIKE"},"Contains"))),n().createElement("div",{className:"col-md-4 mb-3"},n().createElement("input",{type:"text",className:"form-control",placeholder:"Enter value",value:R,onChange:e=>k(e.target.value)}))),n().createElement("div",{className:"d-flex justify-content-end align-items-center mt-3"},n().createElement("button",{className:"btn btn-secondary mr-2",onClick:()=>{S(""),k(""),P(""),f()}},"Reset"),n().createElement("button",{className:"btn btn-primary",onClick:()=>{g({filterColumn:N,filterOperation:D,filterValue:R})}},"Search"))),n().createElement("div",{className:"card-body"},n().createElement("div",{className:"table-responsive"},n().createElement("table",{className:"table table-bordered"},n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",null,n().createElement("input",{type:"checkbox",onChange:e=>{e.target.checked?b(a.map((e=>e.PR_NUMBER))):b([])},checked:v.length===a.length&&a.length>0})),n().createElement("th",null,"PR Number"),n().createElement("th",null,"Title"),n().createElement("th",null,"Request Date"),n().createElement("th",null,"Schedule Date"),n().createElement("th",null,"Document Number"),n().createElement("th",null,"Requestor"),n().createElement("th",null,"Department"),n().createElement("th",null,"Company"),n().createElement("th",null,"Project"),n().createElement("th",null,"Total Amount"),n().createElement("th",null,"Description"),n().createElement("th",null,"Created By"),n().createElement("th",null,"Checked By 1"),n().createElement("th",null,"Checked By 2"),n().createElement("th",null,"Approved By"),n().createElement("th",null,"Status Request"))),n().createElement("tbody",null,h?n().createElement("tr",null,n().createElement("td",{colSpan:"17",className:"text-center"},"Loading...")):0===a.length?n().createElement("tr",null,n().createElement("td",{colSpan:"17",className:"text-center"},"No data available")):a.map((e=>n().createElement("tr",{key:e.PR_NUMBER},n().createElement("td",null,n().createElement("input",{type:"checkbox",checked:v.includes(e.PR_NUMBER),onChange:()=>(e=>{b((t=>t.includes(e.PR_NUMBER)?t.filter((t=>t!==e.PR_NUMBER)):[...t,e.PR_NUMBER]))})(e)})),n().createElement("td",null,e.PR_NUMBER),n().createElement("td",null,e.TITLE),n().createElement("td",null,e.REQUEST_DATE),n().createElement("td",null,e.SCHEDULE_DATE),n().createElement("td",null,e.DOC_NO),n().createElement("td",null,e.REQUESTOR),n().createElement("td",null,e.DEPARTEMENT),n().createElement("td",null,e.COMPANY),n().createElement("td",null,e.PROJECT),n().createElement("td",null,n().createElement(E.HG,{value:e.TOTAL_AMOUNT,displayType:"text",thousandSeparator:",",prefix:"Rp "})),n().createElement("td",null,e.DESCRIPTION),n().createElement("td",null,e.CREATED_BY),n().createElement("td",null,e.CHECKED_BY_1),n().createElement("td",null,e.CHECKED_BY_2),n().createElement("td",null,e.APPROVED_BY),n().createElement("td",null,e.STATUS_REQUEST)))))),n().createElement(i.A,{pageSize:c,handlePageSizeChange:o,currentPage:m,handlePageChange:p,totalItems:u})))),T&&n().createElement("div",null,"Additional content here..."))};var h=a(4479),g=a(1105),f=a(8416),A=a(5615),v=a(1376),b=a(1786),y=a(8465),C=a.n(y),N=a(4458);const S=async(e,t,a,l)=>{try{return(await o.A.post(`${s._R}?f=${t}&branchId=${l}`,e,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data}catch(e){throw console.error("Error posting data:",e),new Error("Failed to post data")}};var R=a(6005),k=a(2689);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},D.apply(null,arguments)}const P=e=>{let{setIsAddingNewPurchaseRequest:t,handleRefresh:a,index:u,item:m}=e;const i=(0,r.getToken)(),E=(0,r.getBranch)(),[d,p]=(0,l.useState)(""),[y,P]=(0,l.useState)(""),[T,I]=(0,l.useState)(""),[_,w]=(0,l.useState)(""),[O,M]=(0,l.useState)("FRM.PTAP.PRC.21a-01"),[B,L]=(0,l.useState)(""),[q,U]=(0,l.useState)(""),[F,$]=(0,l.useState)(""),[x,z]=(0,l.useState)(""),[j,Y]=(0,l.useState)([]),[G,Q]=(0,l.useState)(""),[K,V]=(0,l.useState)([]),[H,J]=(0,l.useState)(!1),[W,X]=(0,l.useState)([]),[Z,ee]=(0,l.useState)(null),[te,ae]=(0,l.useState)([]),[le,ne]=(0,l.useState)(null),[re,ce]=(0,l.useState)([]),[oe,se]=(0,l.useState)(null),[ue,me]=(0,l.useState)([]),[ie,Ee]=(0,l.useState)(null),[de,pe]=(0,l.useState)([]),[he,ge]=(0,l.useState)(null),[fe,Ae]=(0,l.useState)([]),[ve,be]=(0,l.useState)(null),ye=i;(0,l.useEffect)((()=>{c.A.fetchLookupData("MSDT_FORMEMPL",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.NAME,label:e.NAME})));X(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)})),c.A.fetchLookupData("MSDT_FORMCCY",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.CODE,label:e.CODE})));ae(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)})),c.A.fetchLookupData("MSDT_FORMDPRT",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.NAME,label:e.NAME})));ce(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)})),c.A.fetchLookupData("MSDT_FORMVNDR",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.NAME,label:e.NAME})));me(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)})),c.A.fetchLookupData("MSDT_FORMPRJT",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.NAME,label:e.NAME})));pe(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)})),c.A.fetchLookupData("MSDT_FORMPRDT",ye,E).then((e=>{console.log("Currency lookup data:",e);const t=e.data.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{}))),a=t.map((e=>({value:e.NAME,label:e.NAME})));Ae(a)})).catch((e=>{console.error("Failed to fetch currency lookup:",e)}))}),[]);const Ce=(e,t,a)=>{const l=[...j];l[e][t]=a,console.log(e,t,a),"quantity"!==t&&"unit_price"!==t||(l[e].total_price=l[e].quantity*l[e].unit_price),Y(l)},Ne=()=>{K.length===j.length?V([]):V(j.map(((e,t)=>t)))},Se=()=>j.reduce(((e,t)=>e+t.total_price),0),Re=async e=>{if(e.preventDefault(),(await C().fire({title:"Are you sure?",text:"Do you want to save the Purchase Request?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, submit it!",cancelButtonText:"No, cancel!",reverseButtons:!0})).isConfirmed){J(!0);try{const e=Se(),t={pr_number:d,request_date:y,title:T,schedule_date:_,doc_no:O,requestor:B,departement:q,company:F,project:x,description:G,total_amount:e};console.log("Master",t);const a=await S(t,"PUREQ",ye,E);if(console.log("Data posted successfully:",a),"insert Data Successfully"===a.message){for(const e of j){const t={...e,pr_number:d},a=await S(t,"PUREQD",ye,E);console.log("Item posted successfully:",a)}(0,N.b)("Success",a.message,"success"),p(""),P(""),I(""),w(""),M(""),L(""),U(""),$(""),z(""),Q(""),Y([]),V([]),ee(null),se(null),Ee(null),ge(null),ne(null)}}catch(e){console.error(e),J(!1),(0,N.b)("Error",e.message,"error")}finally{J(!1)}}else console.log("Form submission was canceled.")};return(0,l.useEffect)((()=>{(async()=>{try{const e=await(async(e,t)=>{try{const a=await(async(e,t)=>{try{const a=(await o.A.get(e,{headers:{Authorization:`Bearer ${t}`}})).data;return console.log("SEQ",a),a.trim()}catch(e){throw console.error("Error fetching unique sequence:",e),e}})(e,t);return`${a}`}catch(e){throw console.error("Error generating unique ID:",e),e}})(`${s.KD}?code=PR`,ye);p(e)}catch(e){console.error("Failed to generate PR Number:",e)}})()}),[]),n().createElement(l.Fragment,null,n().createElement("section",{className:"content"},n().createElement(h.A,null,n().createElement(g.A,{md:12},n().createElement(f.A,null,n().createElement(f.A.Header,{className:"d-flex justify-content-between align-items-center"},n().createElement(f.A.Title,null,"General Information"),n().createElement("div",{className:"ml-auto"},n().createElement(A.A,{variant:"secondary",className:"mr-2",onClick:()=>{a(),t(!1)}},n().createElement("i",{className:"fas fa-times"})," Cancel"),n().createElement(A.A,{variant:"primary",onClick:Re},n().createElement("i",{className:"fas fa-save"})," Save"))),n().createElement(f.A.Body,null,n().createElement(v.A,null,n().createElement(h.A,null,n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formPrNumber"},n().createElement(v.A.Label,null,"PR. Number"),n().createElement(v.A.Control,{type:"text",placeholder:"Enter No Request",value:d,onChange:e=>p(e.target.value),disabled:!0,required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formDocNo"},n().createElement(v.A.Label,null,"Doc No"),n().createElement(v.A.Control,{type:"text",placeholder:"Enter Document Number",value:O,onChange:e=>M(e.target.value),disabled:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formTitle"},n().createElement(v.A.Label,null,"Title"),n().createElement(v.A.Control,{type:"text",placeholder:"Enter Title",value:T,onChange:e=>I(e.target.value),required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formScheduleDate"},n().createElement(v.A.Label,null,"Schedule Date"),n().createElement(v.A.Control,{type:"date",value:_,onChange:e=>w(e.target.value),required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formRequestor"},n().createElement(v.A.Label,null,"Requestor"),n().createElement(k.A,{id:"requestor",value:Z,onChange:e=>{ee(e),L(e?e.value:"")},options:W,isClearable:!0,placeholder:"Select or type to create...",onCreateOption:e=>{const t={value:e,label:e};X((e=>[...e,t])),ee(t)},required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formDepartment"},n().createElement(v.A.Label,null,"Departement"),n().createElement(R.Ay,{id:"departement",value:oe,onChange:e=>{se(e),U(e?e.value:"")},options:re,isClearable:!0,placeholder:"Select...",required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formCompany"},n().createElement(v.A.Label,null,"Company"),n().createElement(R.Ay,{id:"company",value:ie,onChange:e=>{Ee(e),$(e?e.value:"")},options:ue,isClearable:!0,placeholder:"Select...",required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formProject"},n().createElement(v.A.Label,null,"Project"),n().createElement(R.Ay,{id:"project",value:he,onChange:e=>{ge(e),z(e?e.value:"")},options:de,isClearable:!0,placeholder:"Select...",required:!0}))),n().createElement(g.A,{md:6},n().createElement(v.A.Group,{controlId:"formRequestDate"},n().createElement(v.A.Label,null,"Request Date"),n().createElement(v.A.Control,{type:"date",value:y,onChange:e=>P(e.target.value),required:!0}))))))))),n().createElement(h.A,{className:"mt-4"},n().createElement(g.A,{md:12},n().createElement(f.A,null,n().createElement(f.A.Header,null,n().createElement("div",{className:"d-flex justify-content-between align-items-center"},n().createElement(f.A.Title,null,"Item List"),n().createElement("div",null,n().createElement(A.A,{variant:"success",size:"sm",onClick:()=>{Y([...j,{product:"",product_note:"",quantity:0,currency:"IDR",unit_price:0,total_price:0}])}},n().createElement("i",{className:"fas fa-plus"})," New Item"),n().createElement(A.A,{variant:"danger",size:"sm",className:"ml-2",onClick:()=>{const e=j.filter(((e,t)=>!K.includes(t)));Y(e),V([])},disabled:0===K.length},n().createElement("i",{className:"fas fa-trash"})," Delete Selected")))),n().createElement(f.A.Body,null,n().createElement(b.JY,{onDragEnd:e=>{if(!e.destination)return;const t=[...j],[a]=t.splice(e.source.index,1);t.splice(e.destination.index,0,a),Y(t)}},n().createElement(b.gL,{droppableId:"items"},(e=>n().createElement("div",D({className:"table-responsive"},e.droppableProps,{ref:e.innerRef}),n().createElement("table",{className:"table table-bordered"},n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",null,n().createElement("input",{type:"checkbox",onChange:Ne,checked:K.length===j.length&&j.length>0})),n().createElement("th",null,"Product"),n().createElement("th",null,"Notes"),n().createElement("th",null,"Quantity"),n().createElement("th",null,"Currency"),n().createElement("th",null,"Unit Price"),n().createElement("th",null,"Total Price"),n().createElement("th",null,"Actions"))),n().createElement("tbody",null,0===j.length?n().createElement("tr",null,n().createElement("td",{colSpan:"7",className:"text-center"},"No data available")):j.map(((e,t)=>n().createElement("tr",{key:t,className:K.includes(t)?"table-active":""},n().createElement("td",null,n().createElement("input",{type:"checkbox",checked:K.includes(t),onChange:()=>(e=>{K.includes(e)?V(K.filter((t=>t!==e))):V([...K,e])})(t)})),n().createElement("td",null,n().createElement(R.Ay,{value:ve,onChange:e=>{be(e),Ce(t,"product",e?e.value:null)},options:fe,isClearable:!0,placeholder:"Select Product..."})),n().createElement("td",null,n().createElement(v.A.Control,{type:"text",value:e.product_note,onChange:e=>Ce(t,"product_note",e.target.value)})),n().createElement("td",null,n().createElement(v.A.Control,{type:"number",value:e.quantity,onChange:e=>Ce(t,"quantity",parseFloat(e.target.value)||0)})),n().createElement("td",null,n().createElement(R.Ay,{value:le,onChange:e=>{ne(e),Ce(t,"currency",e?e.value:null)},options:te,isClearable:!0,placeholder:"Select Currency"})),n().createElement("td",null,n().createElement(v.A.Control,{type:"number",value:e.unit_price,onChange:e=>Ce(t,"unit_price",parseFloat(e.target.value)||0)})),n().createElement("td",null,e.total_price.toLocaleString("en-US",{style:"currency",currency:e.currency})),n().createElement("td",null,n().createElement(A.A,{variant:"danger",size:"sm",onClick:()=>(e=>{const t=j.filter(((t,a)=>a!==e));Y(t),V(K.filter((t=>t!==e)))})(t)},n().createElement("i",{className:"fas fa-trash"}))))))),n().createElement("tfoot",null,n().createElement("tr",null,n().createElement("td",{colSpan:"6",className:"text-right"},"Total Amount:"),n().createElement("td",null,n().createElement("strong",null,Se().toLocaleString("en-US",{style:"currency",currency:"IDR"})," ")),n().createElement("td",null)))),e.placeholder)))))))),n().createElement(h.A,{className:"mt-4"},n().createElement(g.A,{md:12},n().createElement(f.A,null,n().createElement(f.A.Body,null,n().createElement(v.A.Group,{controlId:"formDescription"},n().createElement(v.A.Label,null,"Description"),n().createElement(v.A.Control,{as:"textarea",rows:3,placeholder:"Enter description",value:G,onChange:e=>Q(e.target.value)})))))),n().createElement(h.A,{className:"mt-4"},n().createElement(g.A,{md:12,className:"d-flex justify-content-end"},n().createElement(A.A,{variant:"secondary",className:"mr-2",onClick:()=>{a(),t(!1)}},n().createElement("i",{className:"fas fa-times"})," Cancel"),n().createElement(A.A,{variant:"primary",onClick:Re},n().createElement("i",{className:"fas fa-save"})," Save")))),H&&n().createElement("div",{className:"full-screen-overlay"},n().createElement("i",{className:"fa-solid fa-spinner fa-spin full-screen-spinner"})))},T=()=>{const e=(0,r.getToken)(),t=(0,r.getBranch)(),[a,c]=(0,l.useState)([]),[i,E]=(0,l.useState)([]),[d,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[A,v]=(0,l.useState)([]),[b,y]=(0,l.useState)(1),[C,N]=(0,l.useState)(10),[S,R]=(0,l.useState)(0),[k,D]=(0,l.useState)(!0),[T,I]=(0,l.useState)(!0),[_,w]=(0,l.useState)(""),[O,M]=(0,l.useState)(""),[B,L]=(0,l.useState)(""),[q,U]=(0,l.useState)(!1),F=e,$={Authorization:`Bearer ${e}`},x=sessionStorage.getItem("idForm");(0,l.useEffect)((()=>{x&&(async()=>{if(x)try{const e=await o.A.get(`${s.rQ}?formId=${x}`,{headers:$});if(e.data&&e.data.coreFields){const t=e.data.coreFields.map((e=>e.formCode));c(t),console.log("Get Form code",t)}else console.error("Invalid response structure:",e.data)}catch(e){console.error("Error fetching form fields:",e)}else console.error("idForm not found in sessionStorage")})()}),[x]),(0,l.useEffect)((()=>{if(a.length>0){let e=[],l=_,n=B,r=O;const c=new URLSearchParams(window.location.search).get("status");c&&(l="STATUS",n="EQUAL",r=c),m.A.fetchData("",l,n,r,b,C,`PURC_FORM${a[0]}`,t,F,!0).then((t=>{console.log("Form Purchase Request lookup data:",t),e=(0,u.U)(t.data),R(t.totalAllData)})).catch((e=>{console.error("Failed to fetch form Purchase Request lookup:",e)})).then((()=>{console.log("MMT DATA",e),v(e),I(!1)}))}}),[a,C,b,k,g]);const z=()=>{D(!k),I(!0),E([])};return n().createElement(l.Fragment,null,n().createElement("section",{className:"content-header"},n().createElement("div",{className:"container-fluid"},n().createElement("div",{className:"row mb-2"},n().createElement("div",{className:"col-sm-6"},n().createElement("h1",null,"Purchase Request")),n().createElement("div",{className:"col-sm-6"},n().createElement("ol",{className:"breadcrumb float-sm-right"},n().createElement("li",{className:"breadcrumb-item"},n().createElement("a",{href:"/"},"Home")),n().createElement("li",{className:"breadcrumb-item active"},"Purchase Request")))))),n().createElement("section",{className:"content"},q?n().createElement("div",null,n().createElement(P,{setIsAddingNewPurchaseRequest:U,handleRefresh:z})):n().createElement(p,{formCode:a,dataTable:A,totalItems:S,currentPage:b,pageSize:C,handlePageSizeChange:e=>{N(parseInt(e.target.value,10)),y(1)},handlePageChange:e=>{y(e)},handleRefresh:z,isLoadingTable:T,handleFilterSearch:e=>{let{filterColumn:t,filterOperation:a,filterValue:l}=e;console.log("filter Purchase Request list:",t,a,l),L(a),w(t),M(l),f(!g),I(!0)},handleResetFilter:()=>{w(""),M(""),L(""),f(!g),I(!0)},branchId:t,authToken:F,addingNewPurchaseRequest:e=>{U(e)}}),d&&n().createElement("div",{className:"full-screen-overlay"},n().createElement("i",{className:"fa-solid fa-spinner fa-spin full-screen-spinner"}))))}},6974:(e,t,a)=>{"use strict";a.d(t,{KD:()=>u,Mx:()=>s,_R:()=>c,oM:()=>o,rQ:()=>n,vJ:()=>r});const l="http://10.8.135.114:8083",n=`${l}/form-service/form-field`,r=`${l}/form-service/get-data`,c=`${l}/form-service/insert-data`,o=`${l}/form-service/update-data`,s=`${l}/form-service/delete-data`,u="http://10.8.135.114:8201/accounting-service/generate"},8029:e=>{const t=sessionStorage.getItem("accessToken"),a=sessionStorage.getItem("id");e.exports={pending:"PENDING",rework:"REWORK",verified:"VERIFIED",approved:"APPROVED",reject:"REJECT",pendingApproval:"PENDING_APPROVAL",unauthorized:"UNAUTHORIZED",active:"ACTIVE",pendingDelete:"PENDING_DELETE",inactive:"INACTIVE",disabled:"DISABLED",expired:"EXPIRED",lock:"LOCKED",userLoggin:()=>sessionStorage.getItem("userId"),token:t,expiredPass:"EXPIRED_PASSWORD",idUser:a,getToken:()=>sessionStorage.getItem("accessToken"),getIdForm:()=>sessionStorage.getItem("idForm"),getBranch:()=>sessionStorage.getItem("branch")}},4458:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var l=a(8465),n=a.n(l),r=a(9644);const c=a.n(r)()(n()),o=(e,t,a)=>{c.fire({title:e,text:t,icon:a,confirmButtonText:"OK"})}},4503:(e,t,a)=>{"use strict";a.d(t,{A:()=>r}),a(2769);var l=a(1083),n=a(6974);const r={fetchData:async(e,t,a,r,c,o,s,u,m,i)=>{const E={Authorization:`Bearer ${m}`};let d;d=""!==s?`t=${s}`:`f=${e}`,d+=""!==t&&""!==a&&""!==r?`&page=${c}&size=${o}&filterBy=${t}&filterValue=${r}&operation=${a}`:`&page=${c}&size=${o}`,i&&(d+="&showAll=YES");try{return(await l.A.get(`${n.vJ}?${d}&branchId=${u}`,{headers:E})).data}catch(e){throw e}}}},7450:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(1083),n=a(6974);a(8029);const r={fetchLookupData:async(e,t,a)=>{try{return(await l.A.get(`${n.vJ}?t=${e}&branchId=${a}&page=1&size=500`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){throw console.error("Error fetching lookup data:",e),new Error("Failed to fetch lookup data")}},fetchLookupDataView:async(e,t,a)=>{try{return(await l.A.get(`${n.vJ}?t=${e}&branchId=${a}&page=1&size=500&viewOnly=YES`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){throw console.error("Error fetching lookup data:",e),new Error("Failed to fetch lookup data")}},fetchLookupDataLookup:async(e,t,a)=>{try{return(await l.A.get(`${n.vJ}?t=${e}&branchId=${a}&page=1&size=500&lookup=YES`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){throw console.error("Error fetching lookup data:",e),new Error("Failed to fetch lookup data")}}}},8252:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var l=a(2769),n=a.n(l),r=a(8350);const c=e=>{let{totalItems:t,pageSize:a,currentPage:l,onPageChange:c}=e;const o=Math.ceil(t/a);return n().createElement(r.A,null,n().createElement(r.A.Prev,{onClick:()=>c(l-1),disabled:1===l}),(()=>{const e=[];if(o<=5)for(let t=1;t<=o;t++)e.push(n().createElement(r.A.Item,{key:t,active:t===l,onClick:()=>c(t)},t));else{const t=Math.max(1,l-2),a=Math.min(o,l+2);t>1&&(e.push(n().createElement(r.A.Item,{key:"start",onClick:()=>c(1)},"1")),t>2&&e.push(n().createElement(r.A.Ellipsis,{key:"start-ellipsis"})));for(let o=t;o<=a;o++)e.push(n().createElement(r.A.Item,{key:o,active:o===l,onClick:()=>c(o)},o));a<o&&(a<o-1&&e.push(n().createElement(r.A.Ellipsis,{key:"end-ellipsis"})),e.push(n().createElement(r.A.Item,{key:"end",onClick:()=>c(o)},o)))}return e})(),n().createElement(r.A.Next,{onClick:()=>c(l+1),disabled:l===o}))}},3063:(e,t,a)=>{"use strict";a.d(t,{U:()=>l});const l=e=>e.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.toUpperCase()]=e[a],t)),{})))}}]);